{{ $swiperName := "" }}
{{ if eq (.Scratch.Get "section") "news" }}
    {{ $swiperName = "newsSwiper" }}
{{ else if eq (.Scratch.Get "section") "casestudy" }}
    {{ $swiperName = "casestudySwiper" }}
{{ else if eq (.Scratch.Get "section") "sustainability" }}
    {{ $swiperName = "sustainabilitySwiper" }}
{{ end }}

{{ $class := "" }}
{{ if ne (.Scratch.Get "section") "news" }}
    {{ $class = "hidden" }}
{{ end }}

{{ $videoUrl := "" }}
{{ if eq (.Lang) ("en")}}
    {{ $videoUrl = "https://www.youtube.com/embed/r1MN5Bxzhbw?enablejsapi=1" }}
{{ else }}
    {{ $videoUrl = "https://www.youtube.com/embed/RHR05atIgYM?enablejsapi=1" }}
{{ end }}

{{ $youtubeMovies := getJSON "https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=UCfjT9TH2TOy7QRp1X_Ibr4A&maxResults=3&order=date&type=video&key=AIzaSyCQdG7SoPSJVX-vhkkzhjSB6luh6a8Kyno" }}


{{ if or (eq (.Scratch.Get "section") "news") (eq (.Scratch.Get "section") "casestudy") (eq (.Scratch.Get "section") "sustainability") }}
    <div class="flex flex-col sm:flex-row">

        <div id="movie-thumbnail" class="{{ $class }} mb-8 sm:mb-0 sm:mr-8 w-auto sm:w-1/2 md:w-11/12 sm:max-w-[282px]">

            {{ .Scratch.Set "class" "w-full h-[160px] object-cover cursor-pointer" }}
            {{ .Scratch.Set "format" "webp" }}
            {{ .Scratch.Set "hint" "smart" }}
            {{ .Scratch.Set "quolity" "90" }}
            {{ if eq (.Lang) ("en")}}
                {{ .Scratch.Set "src" "img/thumbnail_en.png" }}
            {{ else }}
                {{ .Scratch.Set "src" "img/thumbnail_ja.png" }}
            {{ end }}
            {{ .Scratch.Set "is-lazy" false }}

            {{ partial "atom-picture.html" . }}

            {{ .Scratch.Delete "class" }}
            {{ .Scratch.Delete "format" }}
            {{ .Scratch.Delete "hint" }}
            {{ .Scratch.Delete "quolity" }}
            {{ .Scratch.Delete "src" }}

            <div class="text-sm font-bold pt-5">
                {{ if eq (.Lang) ("en")}}
                    Company guide from the president
                {{ else }}
                    代表が説明する会社案内
                {{ end }}
            </div>
        </div>

        <div #swiperRef="" class="swiper {{ $swiperName }} w-full">
            <div class="swiper-wrapper">
                {{ with .Site.GetPage (.Scratch.Get "section") }}
                    {{ range .Pages }}
                        {{ partial "molecule-section-newtopic-slide.html" . }}
                    {{ end }}
                {{ end }}
            </div>
        </div>
        <div class="flex justify-center md:hidden lg:hidden mt-5">
            {{ partial "molecule-section-irnews-buttongroup.html" . }}
        </div>
    </div>

    <div id="movie-modal" class="fixed inset-0 w-screen h-screen bg-black bg-opacity-50 opacty-0 invisible z-50 transition select-none">
        <div class="absolute -translate-x-2/3 -translate-y-2/3 top-2/3 left-2/3 w-[95%] h-[60%] md:w-[80%] md:h-[80%] bg-white">
            <div id="modal-close" class="absolute top-5 right-5 cursor-pointer text-3xl">×</div>
            <div class="w-[95%] h-[50%] md:w-[73%] md:h-[80%] absolute -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2">
                <iframe id="youtube-video" width="100%" height="100%" src="{{ $videoUrl }}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>

{{ else if eq (.Scratch.Get "section") "ir" }}
    <div class="mt-2">
        {{ .Scratch.Set "backgroundTheme" "black" }}
        {{ partial "molecule-section-irnews-pdf-listing.html" . }}
        {{ .Scratch.Delete "backgroundTheme" }}
    </div>
    <div class="flex justify-center md:hidden lg:hidden mt-5">
        {{ partial "molecule-section-irnews-buttongroup.html" . }}
    </div>

{{ else if eq (.Scratch.Get "section") "youtube" }}
    <div id="youtubeList" class="flex flex-col sm:flex-row justify-between">

        {{ range $youtubeMovies.items }}
            <div class="w-full lg:w-[31.3%] mb-8 sm:mb-0">
                <img class="cursor-pointer h-[180px] w-full object-cover m-0 js-modal-video" src={{ .snippet.thumbnails.default.url }} data-video-id={{ .id.videoId }}>
                <p class="font-bold pt-5 text-sm">{{ .snippet.title }}</p>
            </div>
        {{ end }}
    </div>
    <div class="flex justify-center md:hidden lg:hidden mt-5">

        {{ partial "molecule-section-irnews-buttongroup.html" . }}
    </div>

{{ else }}
    {{ partial "organism-section-contents.html" . }}
{{ end }}


