function ImagePixel(l,d,u,o){const s=document.createElement("canvas"),i=s.getContext("2d"),e=d,t=u;s.width=e,s.height=t,i.drawImage(l,0,0);const n=i.getImageData(0,0,e,t).data,a=[],r=[],c=[];for(let s=0;s<t;s+=o)for(let i=0;i<e;i+=o){const l=(s*e+i)*4,d=n[l]/255,u=n[l+1]/255,h=n[l+2]/255,m=n[l+3]/255,f=i-e/2,p=-(s-t/2),g=0;a.push(f,p,g),r.push(d,u,h),c.push(m)}return{position:a,color:r,alpha:c}}const img=new Image;img.src="img/yoko_c_min.png",img.crossOrigin="anonymous",img.addEventListener("load",()=>{var a=new THREE.Scene,n,c,s,o,e=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);e.position.z=500,e.position.x=0,e.position.y=0;const g=document.body.clientWidth,h=window.innerHeight;e.aspect=g/h,n=new THREE.WebGLRenderer,n.setSize(window.innerWidth,window.innerHeight);const l=document.querySelector("#webgl");l.appendChild(n.domElement),c=new THREE.OrbitControls(e,n.domElement),c.enableZoom=!1;const t=new THREE.BufferGeometry;s=ImagePixel(img,img.width,img.height,2);const v=new THREE.BufferAttribute(new Float32Array(s.position),3),d=new THREE.BufferAttribute(new Float32Array(s.color),3),u=new THREE.BufferAttribute(new Float32Array(s.alpha),1),i=[],m=s.position.length/3;for(let e=0;e<m;e++)i.push((Math.random()-1)*2,(Math.random()-1)*2);const f=new THREE.BufferAttribute(new Float32Array(i),2);t.setAttribute("position",v),t.setAttribute("color",d),t.setAttribute("alpha",u),t.setAttribute("rand",f);const p=new THREE.RawShaderMaterial({vertexShader:document.querySelector("#js-vertex-shader").textContent,fragmentShader:document.querySelector("#js-fragment-shader").textContent,uniforms:{u_ratio:{type:"f",value:0},u_time:{type:"f",value:0}},transparent:!0});o=new THREE.Points(t,p),a.add(o),gsap.from(o.material.uniforms.u_ratio,{value:1e3,duration:3,ease:"power4.out"});function r(){requestAnimationFrame(r),n.render(a,e)}r()})