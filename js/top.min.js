const loading_icon=document.getElementById("loading_icon");window.setTimeout(()=>{loading_icon.style.visibility="visible"},1);var scene=new THREE.Scene,camera,renderer;const width=window.innerWidth,height=window.innerHeight;camera=new THREE.PerspectiveCamera(75,width/height,.1,1e3);const break_point_1=3840,break_point_2=2560,break_point_3=1920,break_point_4=1440,break_point_5=1280,break_point_6=840,break_point_7=650,break_point_8=370;camera.position.x=0,camera.position.y=30,typeof window.ontouchstart!="undefined"&&(width>=break_point_1?camera.position.z=400:width<break_point_1&width>=break_point_2?camera.position.z=400:width<break_point_2&width>=break_point_3?camera.position.z=400:width<break_point_3&width>=break_point_4?camera.position.z=400:width<break_point_4&width>=break_point_5?camera.position.z=400:width<break_point_5&width>=break_point_6?camera.position.z=600:width<break_point_6&width>=break_point_7?camera.position.z=600:width<break_point_7&width>=break_point_8&height<800?camera.position.z=660:width<break_point_7&width>=break_point_8&height>=800?camera.position.z=780:camera.position.z=660),renderer=new THREE.WebGLRenderer;const header_height=document.getElementById("header_nav").clientHeight,main_height=document.getElementById("top_main").clientHeight;document.querySelector("footer").style.marginTop=main_height+"px";const canvas=document.getElementById("webgl");canvas.style.marginTop=header_height+"px",renderer.setSize(width,height-header_height);const wrapper=document.querySelector("#webgl");wrapper.appendChild(renderer.domElement);const geometry=new THREE.BufferGeometry,img=new Image;img.src="../img/logo.png",img.crossOrigin="anonymous",img.addEventListener("load",()=>{var e,t,s,o,i,r,c,l,d,h,m,g,y,_,w,x,C,E,k,A,S,T,z,D,N,R,P,I,B,W,L=et(img,img.width,img.height,2);const ed=new THREE.BufferAttribute(new Float32Array(L.position),3),ea=new THREE.BufferAttribute(new Float32Array(L.color),3),e0=new THREE.BufferAttribute(new Float32Array(L.alpha),1),Y=[],p=L.position.length/3;for(let e=0;e<p;e++)Y.push((Math.random()-1)*2,(Math.random()-1)*2);const ec=new THREE.BufferAttribute(new Float32Array(Y),2),K=[];for(let e=0;e<p;e++)K.push(1);const eu=new THREE.BufferAttribute(new Float32Array(K),1);geometry.setAttribute("position",ed),geometry.setAttribute("color",ea),geometry.setAttribute("alpha",e0),geometry.setAttribute("rand",ec),geometry.setAttribute("flag",eu);const el=new THREE.RawShaderMaterial({vertexShader:document.querySelector("#js-vertex-shader").textContent,fragmentShader:document.querySelector("#js-fragment-shader").textContent,uniforms:{u_ratio:{type:"f",value:0},u_time:{type:"f",value:0},u_value:{type:"f",value:0},pointTexture:{value:(new THREE.TextureLoader).load("../img/spark.png")}},transparent:!0,blending:THREE.AdditiveBlending,depthTest:!1});e=new THREE.Points(geometry,el),e.position.x=0,typeof window.ontouchstart!="undefined"&&(width>=break_point_1?e.material.uniforms.u_value.value=13:width<break_point_1&width>=break_point_2?e.material.uniforms.u_value.value=6:width<break_point_2&width>=break_point_3?e.material.uniforms.u_value.value=4:width<break_point_3&width>=break_point_4?e.material.uniforms.u_value.value=1:width<break_point_4&width>=break_point_5?e.material.uniforms.u_value.value=0:width<break_point_5&width>=break_point_6?e.material.uniforms.u_value.value=0:width<break_point_6&width>=break_point_7?e.material.uniforms.u_value.value=1:width<break_point_7&width>=break_point_8&height<800?e.material.uniforms.u_value.value=-6:width<break_point_7&width>=break_point_8&height>=800?e.material.uniforms.u_value.value=-4:e.material.uniforms.u_value.value=-6),d=e.geometry.attributes.position;const f=e.geometry.attributes.alpha.array,e2=e.geometry.attributes.color.array,u=e.geometry.attributes.position.array,a=e.geometry.attributes.flag.array,b=4,v=500;D=0,N=0;const e1=new THREE.Clock;P=[],I=new THREE.Raycaster,_=new THREE.Vector2(-2,-2),r=new THREE.Vector2,m=new THREE.Vector2,o=new THREE.Vector2,l=new THREE.Vector2,T={x1:e.position.x,y1:e.position.y,z1:e.position.z,x2:e.rotation.x,y2:e.rotation.y,z2:e.rotation.z},A=new THREE.Vector2,s=new THREE.Vector2,w=new THREE.Vector2,t=new THREE.Vector2,C=new THREE.Vector2,x=new THREE.Vector2,h=new THREE.Vector2,E=new THREE.Vector2,R=new THREE.Vector2,k=new THREE.Vector2,y=!1,g=!1,z=!1,S=!1,scene.add(e),P.push(e),window.setTimeout(()=>{const e=document.getElementById("loading");e.style.opacity=0,e.style.visibility="hidden",eo(b-1,v),window.setTimeout(ei,b*v),window.setTimeout(O,b*v)},500),typeof window.ontouchstart=="undefined"?(renderer.domElement.addEventListener("mousedown",q),renderer.domElement.addEventListener("mouseup",U)):(renderer.domElement.addEventListener("touchstart",q),renderer.domElement.addEventListener("touchend",U));const M=document.getElementById("hidden_cover"),ee=document.getElementById("key-visual"),er=ee.getBoundingClientRect().bottom+window.pageYOffset,Q=er-height*.88;window.addEventListener("scroll",()=>{G()}),V(),$(),window.addEventListener("resize",$);const F=document.getElementById("nav_block"),H=document.getElementById("circle"),X=gsap.timeline();X.to(H,{duration:.5,opacity:.7,y:5}).to(H,{duration:.5,x:anime_nav.clientWidth*.5}).to(H,{duration:.8,opacity:0,x:anime_nav.clientWidth*.8,y:-5}),X.repeat(-1),window.setTimeout(()=>{z===!1&&(F.style.opacity=1,F.style.visibility="visible")},b*v+5e3),window.setTimeout(()=>{window.setInterval(e4,1e3)},b*v+5e3+n(10,5)*1e3);function et(h,d,l,o){const s=document.createElement("canvas"),i=s.getContext("2d"),t=d,n=l;s.width=t,s.height=n,i.drawImage(h,0,0);const u=i.getImageData(0,0,t,n).data,a=[],r=[],c=[];for(let s=0;s<n;s+=o)for(let i=0;i<t;i+=o){const d=(s*t+i)*4,v=i-t/2,h=-(s-n/2),m=0;var e=[0,255];const f=e[Math.floor(Math.random()*e.length)],p=e[Math.floor(Math.random()*e.length)],g=e[Math.floor(Math.random()*e.length)],l=u[d+3]/255;l>0&&(a.push(v,h,m),r.push(f,p,g),c.push(l))}return{position:a,color:r,alpha:c}}function en(n){for(var t,e=0;e<p;e++)f[e]>0&&(f[e]=.5**6);for(e=0;e<n;e++)for(t=0;t<p;t++)random=t+Math.floor(Math.random()*2)+1,f[random]>0&&(f[random]=.5**(e+7))}function es(n,t){for(let o=0;o<p;o++){var s={x:f[o],y:a[o]},e=new TWEEN.Tween(s);e.to({x:1,y:1},t+1e3);for(j=0;j<n;j++)f[o]===.5**(j+6)&&(e.delay(j*t),e.start());e.onUpdate(function(e){f[o]=e.x,a[o]=e.y})}}function eo(e,t){en(e),es(e+1,t)}function ei(){y==!1?y=!0:y=!1}function O(){g===!1?g=!0:g===!0&&(g=!1)}function J(){W=setTimeout(function(){D=Date.now()-B+N,J()},10),i=D/1e3}function q(e){r.x=e.clientX-width/2,r.y=-(e.clientY-height/2)+header_height+camera.position.y,_.x=e.clientX/width*2-1,_.y=-(e.clientY/height)*2+1,typeof window.ontouchstart!="undefined"&&(r.x=e.changedTouches[0].pageX-width/2,r.y=-(e.changedTouches[0].pageY-height/2)+header_height+camera.position.y,_.x=e.changedTouches[0].pageX/width*2-1,_.y=-(e.changedTouches[0].pageY/height)*2+1),I.setFromCamera(_,camera);var t=I.intersectObjects(P);t.length>0&&(e.preventDefault(),S=!0),B=Date.now(),J()}function U(v){if(S===!0&&v.preventDefault(),m.x=v.clientX-width/2,m.y=-(v.clientY-height/2)+header_height+camera.position.y,typeof window.ontouchstart!="undefined"&&(m.x=v.changedTouches[0].pageX-width/2,m.y=-(v.changedTouches[0].pageY-height/2)+header_height+camera.position.y),o.x=m.x-r.x,o.y=m.y-r.y,l.x=Math.abs(o.x),l.y=Math.abs(o.y),y==!0)for(let m=0;m<p;m++){A.x=d.getX(m)*(500/camera.position.z)-8,A.y=d.getY(m)*(500/camera.position.z)+8;var h,f,b,_={x:d.getX(m),y:d.getY(m),z:a[m]},j=Math.sqrt(Math.pow(A.x-r.x,2)+Math.pow(A.y-r.y,2));if(typeof window.ontouchstart!="undefined"?(b=3):(b=2),a[m]===1&&j<5/(i*6)*b&i>.01){if(a[m]=0,o.x>0&l.y<20)s.x=1,s.y=0,c=n(50,40);else if(o.x<0&l.y<20)s.x=-1,s.y=0,c=n(50,40);else if(o.y>0&l.y>=20)s.x=0,s.y=1,c=n(50,40);else if(o.y<0&l.y>=20)s.x=0,s.y=-1,c=n(50,40);else if(l.x<5|l.y<5)return;w.x=c*s.x,w.y=c*s.y,t.x=u[3*m]+w.x+o.x/(i*20),t.y=u[3*m+1]+w.y+o.y/(i*20),h=new TWEEN.Tween(_),h.to({x:t.x,y:t.y,z:0},i*3e4),h.easing(TWEEN.Easing.Quadratic.Out),h.onUpdate(function(e){u[3*m]=e.x,u[3*m+1]=e.y,a[m]=e.z}),h.repeat(1),h.yoyo(!0),f=new TWEEN.Tween(T),f.to({x1:t.x/(i*1e3),y1:t.y*-1/(i*1e3),z1:e.position.z+2e3/(i*300),x2:t.y/1e3*-1,y2:t.x/1e3*-1},i*1e5),f.delay(2e3),f.onUpdate(function(t){e.position.x=t.x1,e.position.y=t.y1,e.position.z=t.z1,e.rotation.x=t.x2,e.rotation.y=t.y2}),f.repeat(1),f.yoyo(!0),h.start(),F.style.opacity=0,F.style.visibility="hidden",z=!0,g===!0&&(f.start(),O(),window.setTimeout(O,i*1e5*2+4e3))}}clearTimeout(W),N+=Date.now()-B,D=0,N=0,S=!1}function V(){var t=e1.getDelta();requestAnimationFrame(V),renderer.render(scene,camera),window.setTimeout(()=>{e.material.uniforms.u_time.value+=2*t},b*v-500),TWEEN.update(),e.geometry.attributes.alpha.needsUpdate=!0,e.geometry.attributes.position.needsUpdate=!0,e.geometry.attributes.flag.needsUpdate=!0}function $(){typeof window.ontouchstart=="undefined"&&(width>=break_point_1?(camera.position.z=400,e.material.uniforms.u_value.value=13):width<break_point_1&width>=break_point_2?(camera.position.z=400,e.material.uniforms.u_value.value=8):width<break_point_2&width>=break_point_3?(camera.position.z=400,e.material.uniforms.u_value.value=3):width<break_point_3&width>=break_point_4?(camera.position.z=400,e.material.uniforms.u_value.value=1):width<break_point_4&width>=break_point_5?(camera.position.z=400,e.material.uniforms.u_value.value=0):width<break_point_5&width>=break_point_6?(camera.position.z=400,e.material.uniforms.u_value.value=0):width<break_point_6&width>=break_point_7?(camera.position.z=480,e.material.uniforms.u_value.value=-1):width<break_point_7&width>=break_point_8?(camera.position.z=880,e.material.uniforms.u_value.value=-6):(camera.position.z=800,e.material.uniforms.u_value.value=-6)),renderer.setSize(width,height-header_height),camera.aspect=width/(height-header_height),camera.updateProjectionMatrix(),G()}function G(){window.scrollY>=Q?(M.style.opacity=.5,M.style.visibility="visible"):window.scrollY<Q&&(M.style.opacity=0,M.style.visibility="hidden")}function e4(){c=n(200,50);var s,o,i,r,l,m,f,v,b,j,_,w,S=[[Math.random(),Math.random()],[-1*Math.random(),Math.random()],[Math.random(),-1*Math.random()],[-1*Math.random(),-1*Math.random()]],A=S[Math.floor(Math.random()*S.length)],F=c*A[0],M=c*A[1];if(C.x=n(375,0),x.x=-1*n(400,0),C.y=n(410,0),x.y=-1*n(230,0),h.x=[C.x,x.x],h.y=[C.y,x.y],E.x=h.x[Math.floor(Math.random()*h.x.length)],E.y=h.y[Math.floor(Math.random()*h.y.length)],k.x=n(200,5)*Z(),k.y=n(200,5)*Z(),typeof window.ontouchstart!="undefined"?(m=30):(m=20),y==!0)for(let c=0;c<p;c++)w=d.getX(c)*(500/camera.position.z)-8,_=d.getY(c)*(500/camera.position.z)+8,j={x:d.getX(c),y:d.getY(c),z:a[c]},b=Math.sqrt(Math.pow(w-E.x,2)+Math.pow(_-E.y,2)),v=[[1,0],[-1,0],[0,1],[0,-1]],f=v[Math.floor(Math.random()*v.length)],R.x=f[0],R.y=f[1],s=n(110,80)*.001,a[c]===1&&b<m&&(a[c]=0,l=n(300,280)*n(1500,1e3),t.x=u[3*c]+F+k.x/(s*l),t.y=u[3*c+1]+M+k.y/(s*l),o=new TWEEN.Tween(j),o.to({x:t.x,y:t.y,z:0},s*l),o.easing(TWEEN.Easing.Quadratic.Out),o.onUpdate(function(e){u[3*c]=e.x,u[3*c+1]=e.y,a[c]=e.z}),o.repeat(1),o.yoyo(!0),i=new TWEEN.Tween(T),i.to({x1:t.x/(s*1e3),y1:t.y*-1/(s*1e3),z1:e.position.z+2e3/(s*500),x2:t.y/1e3*-1,y2:t.x/1e3*-1},1e4),i.delay(2e3),i.onUpdate(function(t){e.position.x=t.x1,e.position.y=t.y1,e.position.z=t.z1,e.rotation.x=t.x2,e.rotation.y=t.y2}),r=new TWEEN.Tween(T),r.to({x1:e.position.x,y1:e.position.y,z1:e.position.z,x2:e.rotation.x,y2:e.rotation.y},1e4),r.delay(2e3),r.onUpdate(function(t){e.position.x=t.x1,e.position.y=t.y1,e.position.z=t.z1,e.rotation.x=t.x2,e.rotation.y=t.y2}),i.chain(r),o.start(),z=!0,g===!0&e.position.z+2e3/(s*500)<=camera.position.z*.3&&(i.start(),O(),window.setTimeout(O,12e3*2)))}function n(t,e){return Math.floor(Math.random()*t+1-e)+e}function Z(){var e=[1,-1];return e[Math.floor(Math.random()*e.length)]}})